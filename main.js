/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var e=function(){function e(t){var n=t.baseUrl,r=t.headers;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=n,this._headers=r}var n,r;return n=e,(r=[{key:"getInitialCards",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then((function(t){if(t.ok)return t.json()}))}},{key:"getInitialUserInfo",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then((function(t){if(t.ok)return t.json()}))}},{key:"pathUserInfo",value:function(t){return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t.name,about:t.about})})}},{key:"postCard",value:function(t){return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:t.name,link:t.link})})}},{key:"deleteCard",value:function(t){return fetch("".concat(this._baseUrl,"/cards/").concat(t),{method:"DELETE",headers:this._headers})}}])&&t(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}();function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var r=function(){function t(e){var n=e.containerSelector,r=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._container=document.querySelector(n),this._renderer=r}var e,r;return e=t,(r=[{key:"setItem",value:function(t){this._container.prepend(t)}},{key:"_clear",value:function(){this._container.innerHTML=""}},{key:"renderItems",value:function(t){var e=this;this._clear(),t.forEach((function(t){e._renderer(t)}))}}])&&n(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=function(){function t(e){var n=e.data,r=e.templateSelector,o=e.userId,i=e.handleBtnDeleteClick,u=e.handleCardClick;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=n.name,this._link=n.link,this._templateSelector=r,this._userId=o,this._ownerId=n.owner._id,this._handleCardClick=u,this._countLikes=n.likes.length,this._handleBtnDeleteClick=i,this.id=n._id}var e,n;return e=t,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".gallery__list-element").cloneNode(!0)}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._nameElement=this._element.querySelector(".gallery__name"),this._photoElement=this._element.querySelector(".gallery__photo"),this._likeElement=this._element.querySelector(".gallery__like-btn"),this._trashElement=this._element.querySelector(".gallery__trash"),this._countLikesElement=this._element.querySelector(".gallery__like-count"),this._nameElement.textContent=this._name,this._photoElement.src=this._link,this._photoElement.alt=this._name,this._countLikesElement.textContent=this._countLikes,this._isUserOwner()||this._deleteTrashElement(),this._setEventListeners(),this._element}},{key:"_isUserOwner",value:function(){return this._userId===this._ownerId}},{key:"_deleteTrashElement",value:function(){this._trashElement.remove()}},{key:"_setEventListeners",value:function(){var t=this;this._likeElement.addEventListener("click",(function(){t._handleLikeClick()})),this._trashElement.addEventListener("click",(function(){t._handleBtnDeleteClick()})),this._photoElement.addEventListener("click",(function(){t._handleCardClick()}))}},{key:"_handleLikeClick",value:function(){this._likeElement.classList.toggle("gallery__like-btn_active")}},{key:"deleteCard",value:function(){this._element.remove(),this._element=null}}])&&o(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=function(){function t(e){var n=e.nameSelector,r=e.aboutSelector;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._userName=document.querySelector(n),this._userAbout=document.querySelector(r)}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return{"user-name":this._userName.textContent,"user-about":this._userAbout.textContent}}},{key:"setUserInfo",value:function(t){var e=t.name,n=t.about;this._userName.textContent=e,this._userAbout.textContent=n}}])&&u(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popupSelector=e,this._popup=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this)}var e,n;return e=t,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),window.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),window.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(t){"Escape"===t.key&&this.close()}},{key:"setEventListeners",value:function(){var t=this;this._popup.addEventListener("mousedown",(function(e){e.target.classList.contains("popup_opened")&&t.close(),e.target.classList.contains("popup__close-btn")&&t.close()}))}}])&&c(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=h(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},p.apply(this,arguments)}function h(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=m(t)););return t}function y(t,e){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},y(t,e)}function d(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function m(t){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},m(t)}var v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=m(r);if(o){var n=m(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return d(this,t)});function u(t){var e,n=t.popupSelector;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,n))._popupImg=e._popup.querySelector(".popup__photo"),e._popupNameValue=e._popup.querySelector(".popup__photo-name"),e}return e=u,(n=[{key:"open",value:function(t){var e=t.name,n=t.link;p(m(u.prototype),"open",this).call(this),this._popupImg.src=n,this._popupImg.alt=e,this._popupNameValue.textContent=e}}])&&f(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(l);function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function g(){return g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=w(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},g.apply(this,arguments)}function w(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=k(t)););return t}function S(t,e){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},S(t,e)}function E(t,e){if(e&&("object"===_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function k(t){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},k(t)}var O=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=k(r);if(o){var n=k(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return E(this,t)});function u(t){var e,n=t.popupSelector,r=t.handleFormSubmit;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,n))._handleFormSubmit=r,e._popupForm=e._popup.querySelector(".popup__form"),e._inputsValue={},e._formInputs=e._popup.querySelectorAll(".popup__input"),e._btnSubmit=e._popupForm.querySelector(".popup__save-btn"),e._btnSubmitTextValue=e._btnSubmit.textContent,e}return e=u,(n=[{key:"close",value:function(){g(k(u.prototype),"close",this).call(this),this._popupForm.reset()}},{key:"setInputValue",value:function(t){this._formInputs.forEach((function(e){e.value=t[e.name]}))}},{key:"setLoadnigIsBtn",value:function(t){t?(this._btnSubmit.disabled=!0,this._btnSubmit.textContent="Сохранение..."):(this._btnSubmit.disabled=!1,this._btnSubmit.textContent=this._btnSubmitTextValue)}},{key:"_getInputValues",value:function(){var t=this;return this._formInputs.forEach((function(e){var n=e.getAttribute("name");t._inputsValue[n]=e.value})),this._inputsValue}},{key:"setEventListeners",value:function(){var t=this;g(k(u.prototype),"setEventListeners",this).call(this),this._popup.addEventListener("submit",(function(e){e.preventDefault(),t._handleFormSubmit(t._getInputValues())}))}}])&&b(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(l);function L(t){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L(t)}function j(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function I(){return I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=P(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},I.apply(this,arguments)}function P(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=T(t)););return t}function x(t,e){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},x(t,e)}function C(t,e){if(e&&("object"===L(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function T(t){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},T(t)}var B=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&x(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=T(r);if(o){var n=T(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return C(this,t)});function u(t){var e,n=t.popupSelector,r=t.handleFormSubmit;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,n))._handleFormSubmit=r,e._popupForm=e._popup.querySelector(".popup__form"),e._btnSubmit=e._popupForm.querySelector(".popup__save-btn"),e._btnSubmitTextValue=e._btnSubmit.textContent,e.cardId=null,e}return e=u,(n=[{key:"close",value:function(){I(T(u.prototype),"close",this).call(this)}},{key:"open",value:function(t){I(T(u.prototype),"open",this).call(this),this.card=t}},{key:"setLoadnigIsBtn",value:function(t){t?(this._btnSubmit.disabled=!0,this._btnSubmit.textContent="Удаление..."):(this._btnSubmit.disabled=!1,this._btnSubmit.textContent=this._btnSubmitTextValue)}},{key:"setEventListeners",value:function(){var t=this;I(T(u.prototype),"setEventListeners",this).call(this),this._popup.addEventListener("submit",(function(e){e.preventDefault(),t._handleFormSubmit(t.cardId)}))}}])&&j(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(l);function R(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var q=function(){function t(e){var n=e.config,r=e.formElement;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._formSelector=n.formSelector,this._inputSelector=n.inputSelector,this._submitButtonSelector=n.submitButtonSelector,this._inactiveButtonSelector=n.inactiveButtonSelector,this._inputErrorSelector=n.inputErrorSelector,this._errorSelector=n.errorSelector,this._formElement=r,this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector)}var e,n;return e=t,(n=[{key:"_showInputError",value:function(t,e){this._errorElement=this._formElement.querySelector("#".concat(t.id,"-error")),t.classList.add(this._inputErrorSelector),this._errorElement.textContent=e,this._errorElement.classList.add(this._errorSelector)}},{key:"_hideInputError",value:function(t){this._errorElement=this._formElement.querySelector("#".concat(t.id,"-error")),t.classList.remove(this._inputErrorSelector),this._errorElement.classList.remove(this._errorSelector),this._errorElement.textContent=""}},{key:"_checkInputValidity",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t,t.validationMessage)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(t){return!t.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._inactiveButtonSelector),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonSelector),this._buttonElement.disabled=!1)}},{key:"_setEventListeners",value:function(){var t=this;this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidity(e),t._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._setEventListeners()}},{key:"resetValidation",value:function(){var t=this;this._toggleButtonState(),this._inputList.forEach((function(e){t._hideInputError(e)}))}}])&&R(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),V=document.querySelector(".profile"),F=V.querySelector(".profile__edit-btn"),U=V.querySelector(".profile__add-btn"),N={};function A(t){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A(t)}function D(){D=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var i=e&&e.prototype instanceof p?e:p,u=Object.create(i.prototype),a=new O(o||[]);return r(u,"_invoke",{value:w(t,n,a)}),u}function s(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function p(){}function h(){}function y(){}var d={};c(d,i,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(L([])));v&&v!==e&&n.call(v,i)&&(d=v);var _=y.prototype=p.prototype=Object.create(d);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function o(r,i,u,a){var c=s(t[r],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==A(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,u,a)}),(function(t){o("throw",t,u,a)})):e.resolve(f).then((function(t){l.value=t,u(l)}),(function(t){return o("throw",t,u,a)}))}a(c.arg)}var i;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function w(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var u=n.delegate;if(u){var a=S(u,n);if(a){if(a===f)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=s(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function S(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=s(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,f;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function L(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return h.prototype=y,r(_,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:h,configurable:!0}),h.displayName=c(y,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,c(t,a,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},b(g.prototype),c(g.prototype,u,(function(){return this})),t.AsyncIterator=g,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var u=new g(l(e,n,r,o),i);return t.isGeneratorFunction(n)?u:u.next().then((function(t){return t.done?t.value:u.next()}))},b(_),c(_,a,"Generator"),c(_,i,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=L,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return u.type="throw",u.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],u=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var a=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(a&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var u=i?i.completion:{};return u.type=t,u.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(u)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;k(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:L(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function G(t,e,n,r,o,i,u){try{var a=t[i](u),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(r,o)}var H=null,J=new e({baseUrl:"https://nomoreparties.co/v1/cohort-55",headers:{authorization:"5b60ccac-c30f-46d8-b7b2-7f9c7f002bee","Content-Type":"application/json"}}),M=new a({nameSelector:".profile__user-name",aboutSelector:".profile__user-about"}),Y=new v({popupSelector:"#popup_gallery_item"}),z=new B({popupSelector:"#popup_delete_item",handleFormSubmit:function(){z.setLoadnigIsBtn(!0),J.deleteCard(z.card.id).then((function(){z.card.deleteCard()})).catch((function(t){console.log(t)})).finally((function(){z.setLoadnigIsBtn(!1),z.close()}))}}),K=new O({popupSelector:"#popup_profile",handleFormSubmit:function(t){N["profile-form"].resetValidation(),K.setLoadnigIsBtn(!0),J.pathUserInfo({name:t["user-name"],about:t["user-about"]}).then((function(t){return t.json()})).then((function(t){M.setUserInfo(t)})).catch((function(t){console.log(t)})).finally((function(){K.setLoadnigIsBtn(!1),K.close()}))}}),Q=new O({popupSelector:"#popup_gallery",handleFormSubmit:function(t){Q.setLoadnigIsBtn(!0),J.postCard({name:t["photo-name"],link:t["photo-link"]}).then((function(t){return t.json()})).then((function(t){W(t)})).catch((function(t){console.log(t)})).finally((function(){Q.setLoadnigIsBtn(!1),Q.close()}))}});function W(t){var e=function(t){var e=new i({data:t,templateSelector:"#gallery-item-template",userId:H,handleBtnDeleteClick:function(){z.open(e)},handleCardClick:function(){Y.open({name:e._name,link:e._link})}});return e.generateCard()}(t);Z.setItem(e)}Y.setEventListeners(),K.setEventListeners(),Q.setEventListeners(),z.setEventListeners();var X,Z=new r({containerSelector:".gallery__list",renderer:function(t){W(t)}});(function(){var t,e=(t=D().mark((function t(){return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,J.getInitialUserInfo().then((function(t){H=t._id,M.setUserInfo(t)})).catch((function(t){console.log(t)}));case 2:return t.next=4,J.getInitialCards().then((function(t){Z.renderItems(t.reverse())})).catch((function(t){console.log(t)}));case 4:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function u(t){G(i,r,o,u,a,"next",t)}function a(t){G(i,r,o,u,a,"throw",t)}u(void 0)}))});return function(){return e.apply(this,arguments)}})()(),X={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__save-btn",inactiveButtonSelector:"popup__save-btn_disabled",inputErrorSelector:"popup__input_type_error",errorSelector:"popup__input-error_active"},Array.from(document.querySelectorAll(X.formSelector)).forEach((function(t){var e=new q({config:X,formElement:t}),n=t.getAttribute("name");N[n]=e,e.enableValidation()})),F.addEventListener("click",(function(){K.setInputValue(M.getUserInfo()),N["profile-form"].resetValidation(),K.open()})),U.addEventListener("click",(function(){N["card-form"].resetValidation(),Q.open()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RixHQUNoQixJQUFNcUUsRUFBWSxJQUFJdkUsRUFBYyxDQUNsQ0MsT0FBUUEsRUFDUkMsWUFBYUEsSUFFVHNFLEVBQVd0RSxFQUFZUCxhQUFhLFFBQzFDd0MsRUFBZXFDLEdBQVlELEVBQzNCQSxFQUFVRSxrQkFDWixJQUtGeEMsRUFBbUIvRSxpQkFBaUIsU0FBUyxXQUMzQytGLEVBQWlCeUIsY0FBY25DLEVBQVNvQyxlQUN4Q3hDLEVBQWUsZ0JBQWdCZ0Isa0JBQy9CRixFQUFpQlUsTUFDbkIsSUFFQXpCLEVBQXlCaEYsaUJBQWlCLFNBQVMsV0FDakRpRixFQUFlLGFBQWFnQixrQkFDNUJJLEVBQWVJLE1BQ2pCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGjQoW9uZmlybWF0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgaGVhZGVycyB9KSB7XG4gICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XG4gICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XG4gIH1cblxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBnZXRJbml0aWFsVXNlckluZm8oKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwYXRoVXNlckluZm8oZGF0YSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgICBhYm91dDogZGF0YS5hYm91dFxuICAgICAgfSlcbiAgICB9KTtcbiAgfVxuXG4gIHBvc3RDYXJkKGRhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgICBsaW5rOiBkYXRhLmxpbmtcbiAgICAgIH0pXG4gICAgfSk7XG4gIH1cblxuICBkZWxldGVDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgfSk7XG4gIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBjb250YWluZXJTZWxlY3RvciwgcmVuZGVyZXJ9KSB7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgfVxuXG4gIHNldEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICB9XG5cbiAgX2NsZWFyKCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKGl0ZW1zKSB7XG4gICAgdGhpcy5fY2xlYXIoKTtcbiAgICBpdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3Ioe2RhdGEsIHRlbXBsYXRlU2VsZWN0b3IsIHVzZXJJZCwgaGFuZGxlQnRuRGVsZXRlQ2xpY2ssIGhhbmRsZUNhcmRDbGlja30pIHtcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5fdGVtcGxhdGVTZWxlY3RvciA9IHRlbXBsYXRlU2VsZWN0b3I7XG4gICAgdGhpcy5fdXNlcklkID0gdXNlcklkO1xuICAgIHRoaXMuX293bmVySWQgPSBkYXRhLm93bmVyLl9pZDtcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gICAgdGhpcy5fY291bnRMaWtlcyA9IGRhdGEubGlrZXMubGVuZ3RoO1xuICAgIHRoaXMuX2hhbmRsZUJ0bkRlbGV0ZUNsaWNrID0gaGFuZGxlQnRuRGVsZXRlQ2xpY2s7XG4gICAgdGhpcy5pZCA9IGRhdGEuX2lkO1xuICB9XG5cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IpXG4gICAgICAuY29udGVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5nYWxsZXJ5X19saXN0LWVsZW1lbnQnKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcblxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcbiAgfVxuXG4gIGdlbmVyYXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcblxuICAgIHRoaXMuX25hbWVFbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZ2FsbGVyeV9fbmFtZScpO1xuICAgIHRoaXMuX3Bob3RvRWxlbWVudCAgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYWxsZXJ5X19waG90bycpO1xuICAgIHRoaXMuX2xpa2VFbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZ2FsbGVyeV9fbGlrZS1idG4nKTtcbiAgICB0aGlzLl90cmFzaEVsZW1lbnQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYWxsZXJ5X190cmFzaCcpO1xuICAgIHRoaXMuX2NvdW50TGlrZXNFbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZ2FsbGVyeV9fbGlrZS1jb3VudCcpO1xuXG4gICAgdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX3Bob3RvRWxlbWVudC5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX3Bob3RvRWxlbWVudC5hbHQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX2NvdW50TGlrZXNFbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy5fY291bnRMaWtlcztcblxuICAgIGlmKCF0aGlzLl9pc1VzZXJPd25lcigpKSB7XG4gICAgICB0aGlzLl9kZWxldGVUcmFzaEVsZW1lbnQoKTtcbiAgICB9XG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gIH1cblxuICBfaXNVc2VyT3duZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3VzZXJJZCA9PT0gdGhpcy5fb3duZXJJZDtcbiAgfVxuXG4gIF9kZWxldGVUcmFzaEVsZW1lbnQoKSB7XG4gICAgdGhpcy5fdHJhc2hFbGVtZW50LnJlbW92ZSgpO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2xpa2VFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4geyB0aGlzLl9oYW5kbGVMaWtlQ2xpY2soKTsgfSk7XG4gICAgdGhpcy5fdHJhc2hFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4geyB0aGlzLl9oYW5kbGVCdG5EZWxldGVDbGljaygpOyB9KTtcbiAgICB0aGlzLl9waG90b0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7IHRoaXMuX2hhbmRsZUNhcmRDbGljaygpfSk7XG4gIH1cblxuICBfaGFuZGxlTGlrZUNsaWNrKCkge1xuICAgIHRoaXMuX2xpa2VFbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoJ2dhbGxlcnlfX2xpa2UtYnRuX2FjdGl2ZScpO1xuICB9O1xuXG4gIGRlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgfTtcbn1cbiIsImV4cG9ydCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBhYm91dFNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl91c2VyTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl91c2VyQWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGFib3V0U2VsZWN0b3IpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICd1c2VyLW5hbWUnOiB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCxcbiAgICAgICd1c2VyLWFib3V0JzogdGhpcy5fdXNlckFib3V0LnRleHRDb250ZW50XG4gICAgfTtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSkge1xuICAgIHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl91c2VyQWJvdXQudGV4dENvbnRlbnQgPSBhYm91dDtcbiAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IgPSBwb3B1cFNlbGVjdG9yO1xuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJyk7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XG4gICAgaWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGV2dCkgPT4ge1xuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9vcGVuZWQnKSkge1xuICAgICAgICB0aGlzLmNsb3NlKClcbiAgICAgIH1cbiAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfX2Nsb3NlLWJ0bicpKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKVxuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9wb3B1cEltZyA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fcGhvdG8nKTtcbiAgICB0aGlzLl9wb3B1cE5hbWVWYWx1ZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fcGhvdG8tbmFtZScpO1xuICB9XG5cbiAgb3Blbih7IG5hbWUsIGxpbmsgfSkge1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgICB0aGlzLl9wb3B1cEltZy5zcmMgPSBsaW5rO1xuICAgIHRoaXMuX3BvcHVwSW1nLmFsdCA9IG5hbWU7XG4gICAgdGhpcy5fcG9wdXBOYW1lVmFsdWUudGV4dENvbnRlbnQgPSBuYW1lO1xuICB9XG59XG4iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQgfSkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XG4gICAgdGhpcy5faW5wdXRzVmFsdWUgPSB7fTtcbiAgICB0aGlzLl9mb3JtSW5wdXRzID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9faW5wdXRcIik7XG4gICAgdGhpcy5fYnRuU3VibWl0ID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3NhdmUtYnRuXCIpO1xuICAgIHRoaXMuX2J0blN1Ym1pdFRleHRWYWx1ZSA9IHRoaXMuX2J0blN1Ym1pdC50ZXh0Q29udGVudDtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XG4gIH1cblxuICBzZXRJbnB1dFZhbHVlKGRhdGEpIHtcbiAgICB0aGlzLl9mb3JtSW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dC52YWx1ZSA9IGRhdGFbaW5wdXQubmFtZV07XG4gICAgfSk7XG4gIH1cblxuICBzZXRMb2FkbmlnSXNCdG4oaXNMb2FkaW5nKSB7XG4gICAgaWYgKGlzTG9hZGluZykge1xuICAgICAgdGhpcy5fYnRuU3VibWl0LmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMuX2J0blN1Ym1pdC50ZXh0Q29udGVudCA9IFwi0KHQvtGF0YDQsNC90LXQvdC40LUuLi5cIjtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fYnRuU3VibWl0LmRpc2FibGVkID0gZmFsc2U7XG4gICAgICB0aGlzLl9idG5TdWJtaXQudGV4dENvbnRlbnQgPSB0aGlzLl9idG5TdWJtaXRUZXh0VmFsdWU7XG4gICAgfVxuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIHRoaXMuX2Zvcm1JbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGNvbnN0IGlucHV0TmFtZSA9IGlucHV0LmdldEF0dHJpYnV0ZShcIm5hbWVcIik7XG4gICAgICB0aGlzLl9pbnB1dHNWYWx1ZVtpbnB1dE5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0c1ZhbHVlO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRo0KFvbmZpcm1hdGlvbiBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0IH0pIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xuICAgIHRoaXMuX2J0blN1Ym1pdCA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19zYXZlLWJ0blwiKTtcbiAgICB0aGlzLl9idG5TdWJtaXRUZXh0VmFsdWUgPSB0aGlzLl9idG5TdWJtaXQudGV4dENvbnRlbnQ7XG4gICAgdGhpcy5jYXJkSWQgPSBudWxsO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgfVxuXG4gIG9wZW4oY2FyZCkge1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgICB0aGlzLmNhcmQgPSBjYXJkO1xuICB9XG5cbiAgc2V0TG9hZG5pZ0lzQnRuKGlzTG9hZGluZykge1xuICAgIGlmIChpc0xvYWRpbmcpIHtcbiAgICAgIHRoaXMuX2J0blN1Ym1pdC5kaXNhYmxlZCA9IHRydWU7XG4gICAgICB0aGlzLl9idG5TdWJtaXQudGV4dENvbnRlbnQgPSBcItCj0LTQsNC70LXQvdC40LUuLi5cIjtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fYnRuU3VibWl0LmRpc2FibGVkID0gZmFsc2U7XG4gICAgICB0aGlzLl9idG5TdWJtaXQudGV4dENvbnRlbnQgPSB0aGlzLl9idG5TdWJtaXRUZXh0VmFsdWU7XG4gICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLmNhcmRJZCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IoeyBjb25maWcsIGZvcm1FbGVtZW50IH0pIHtcbiAgICB0aGlzLl9mb3JtU2VsZWN0b3IgPSBjb25maWcuZm9ybVNlbGVjdG9yO1xuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBjb25maWcuaW5wdXRTZWxlY3RvcjtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvblNlbGVjdG9yID0gY29uZmlnLmluYWN0aXZlQnV0dG9uU2VsZWN0b3I7XG4gICAgdGhpcy5faW5wdXRFcnJvclNlbGVjdG9yID0gY29uZmlnLmlucHV0RXJyb3JTZWxlY3RvcjtcbiAgICB0aGlzLl9lcnJvclNlbGVjdG9yID0gY29uZmlnLmVycm9yU2VsZWN0b3I7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcikpO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xuICAgIHRoaXMuX2Vycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yU2VsZWN0b3IpO1xuICAgIHRoaXMuX2Vycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgICB0aGlzLl9lcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvclNlbGVjdG9yKTtcbiAgfTtcblxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgdGhpcy5fZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JTZWxlY3Rvcik7XG4gICAgdGhpcy5fZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JTZWxlY3Rvcik7XG4gICAgdGhpcy5fZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gJyc7XG4gIH07XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcbiAgICBpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWRcbiAgICAgID8gdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KVxuICAgICAgOiB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XG4gIH07XG5cbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gICAgfSk7XG4gIH07XG5cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25TZWxlY3Rvcik7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25TZWxlY3Rvcik7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gICAgfVxuICB9O1xuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9O1xuXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9KTtcbiAgfTtcbn1cbiIsImV4cG9ydCBjb25zdCBwb3B1cFBob3RvSXRlbVNlbGVjdG9yID0gJyNwb3B1cF9nYWxsZXJ5X2l0ZW0nO1xuZXhwb3J0IGNvbnN0IHBvcHVwRGVsZXRlSXRlbVNlbGVjdG9yID0gJyNwb3B1cF9kZWxldGVfaXRlbSc7XG5leHBvcnQgY29uc3QgcG9wdXBFZGl0UHJvZmlsZVNlbGVjdG9yID0gJyNwb3B1cF9wcm9maWxlJztcbmV4cG9ydCBjb25zdCBwb3B1cEFkZFBob3RvU2VsZWN0b3IgPSAnI3BvcHVwX2dhbGxlcnknO1xuXG5leHBvcnQgY29uc3QgcHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlJyk7XG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRJbmZvQnRuID0gcHJvZmlsZS5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdC1idG4nKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlQWRkR2FsbGVyeUl0ZW1CdG4gPSBwcm9maWxlLnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hZGQtYnRuJyk7XG5cbmV4cG9ydCBjb25zdCBnYWxsZXJ5TGlzdFNlbGVjdG9yID0gJy5nYWxsZXJ5X19saXN0JztcblxuZXhwb3J0IGNvbnN0IGZvcm1WYWxpZGF0b3JzID0ge307XG5cbmV4cG9ydCBjb25zdCBjb25maWdWYWxpZGF0b3IgPSB7XG4gIGZvcm1TZWxlY3RvcjogJy5wb3B1cF9fZm9ybScsXG4gIGlucHV0U2VsZWN0b3I6ICcucG9wdXBfX2lucHV0JyxcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcucG9wdXBfX3NhdmUtYnRuJyxcbiAgaW5hY3RpdmVCdXR0b25TZWxlY3RvcjogJ3BvcHVwX19zYXZlLWJ0bl9kaXNhYmxlZCcsXG4gIGlucHV0RXJyb3JTZWxlY3RvcjogJ3BvcHVwX19pbnB1dF90eXBlX2Vycm9yJyxcbiAgZXJyb3JTZWxlY3RvcjogJ3BvcHVwX19pbnB1dC1lcnJvcl9hY3RpdmUnXG59O1xuIiwiaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XG5pbXBvcnQgeyBBcGkgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcbmltcG9ydCB7IFNlY3Rpb24gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgeyBDYXJkIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IHsgVXNlckluZm8gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IHsgUG9wdXBXaXRoSW1hZ2UgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IHsgUG9wdXBXaXRoRm9ybSB9IGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCB7IFBvcHVwV2l0aNChb25maXJtYXRpb24gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGjQoW9uZmlybWF0aW9uLmpzXCI7XG5pbXBvcnQgeyBGb3JtVmFsaWRhdG9yIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuXG5sZXQgdXNlcklkID0gbnVsbDtcblxuaW1wb3J0IHtcbiAgcG9wdXBQaG90b0l0ZW1TZWxlY3RvcixcbiAgcG9wdXBFZGl0UHJvZmlsZVNlbGVjdG9yLFxuICBwb3B1cEFkZFBob3RvU2VsZWN0b3IsXG4gIHBvcHVwRGVsZXRlSXRlbVNlbGVjdG9yLFxuICBwcm9maWxlRWRpdEluZm9CdG4sXG4gIHByb2ZpbGVBZGRHYWxsZXJ5SXRlbUJ0bixcbiAgZ2FsbGVyeUxpc3RTZWxlY3RvcixcbiAgZm9ybVZhbGlkYXRvcnMsXG4gIGNvbmZpZ1ZhbGlkYXRvcixcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgYmFzZVVybDogXCJodHRwczovL25vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTU1XCIsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiBcIjViNjBjY2FjLWMzMGYtNDZkOC1iN2IyLTdmOWM3ZjAwMmJlZVwiLFxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICB9LFxufSk7XG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgbmFtZVNlbGVjdG9yOiBcIi5wcm9maWxlX191c2VyLW5hbWVcIixcbiAgYWJvdXRTZWxlY3RvcjogXCIucHJvZmlsZV9fdXNlci1hYm91dFwiLFxufSk7XG5cbmNvbnN0IHBvcHVwRnVsbFNjcmVlbkltZyA9IG5ldyBQb3B1cFdpdGhJbWFnZSh7XG4gIHBvcHVwU2VsZWN0b3I6IHBvcHVwUGhvdG9JdGVtU2VsZWN0b3IsXG59KTtcblxuY29uc3QgcG9wdXBEZWxldGVDYXJkID0gbmV3IFBvcHVwV2l0aNChb25maXJtYXRpb24oe1xuICBwb3B1cFNlbGVjdG9yOiBwb3B1cERlbGV0ZUl0ZW1TZWxlY3RvcixcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKCkgPT4ge1xuICAgIHBvcHVwRGVsZXRlQ2FyZC5zZXRMb2FkbmlnSXNCdG4odHJ1ZSk7XG5cbiAgICBhcGlcbiAgICAgIC5kZWxldGVDYXJkKHBvcHVwRGVsZXRlQ2FyZC5jYXJkLmlkKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICBwb3B1cERlbGV0ZUNhcmQuY2FyZC5kZWxldGVDYXJkKCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIHBvcHVwRGVsZXRlQ2FyZC5zZXRMb2FkbmlnSXNCdG4oZmFsc2UpO1xuICAgICAgICBwb3B1cERlbGV0ZUNhcmQuY2xvc2UoKTtcbiAgICAgIH0pO1xuICB9LFxufSk7XG5cbmNvbnN0IHBvcHVwRm9ybVByb2ZpbGUgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIHBvcHVwU2VsZWN0b3I6IHBvcHVwRWRpdFByb2ZpbGVTZWxlY3RvcixcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGlucHV0c1ZhbHVlKSA9PiB7XG4gICAgZm9ybVZhbGlkYXRvcnNbXCJwcm9maWxlLWZvcm1cIl0ucmVzZXRWYWxpZGF0aW9uKCk7XG4gICAgcG9wdXBGb3JtUHJvZmlsZS5zZXRMb2FkbmlnSXNCdG4odHJ1ZSk7XG5cbiAgICBhcGlcbiAgICAgIC5wYXRoVXNlckluZm8oe1xuICAgICAgICBuYW1lOiBpbnB1dHNWYWx1ZVtcInVzZXItbmFtZVwiXSxcbiAgICAgICAgYWJvdXQ6IGlucHV0c1ZhbHVlW1widXNlci1hYm91dFwiXSxcbiAgICAgIH0pXG4gICAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgIHJldHVybiByZXN1bHQuanNvbigpO1xuICAgICAgfSlcbiAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICB9KVxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICBwb3B1cEZvcm1Qcm9maWxlLnNldExvYWRuaWdJc0J0bihmYWxzZSk7XG4gICAgICAgIHBvcHVwRm9ybVByb2ZpbGUuY2xvc2UoKTtcbiAgICAgIH0pO1xuICB9LFxufSk7XG5cbmNvbnN0IHBvcHVwRm9ybVBob3RvID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICBwb3B1cFNlbGVjdG9yOiBwb3B1cEFkZFBob3RvU2VsZWN0b3IsXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChpbnB1dHNWYWx1ZSkgPT4ge1xuICAgIHBvcHVwRm9ybVBob3RvLnNldExvYWRuaWdJc0J0bih0cnVlKTtcblxuICAgIGFwaVxuICAgICAgLnBvc3RDYXJkKHtcbiAgICAgICAgbmFtZTogaW5wdXRzVmFsdWVbXCJwaG90by1uYW1lXCJdLFxuICAgICAgICBsaW5rOiBpbnB1dHNWYWx1ZVtcInBob3RvLWxpbmtcIl0sXG4gICAgICB9KVxuICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICByZXR1cm4gcmVzdWx0Lmpzb24oKTtcbiAgICAgIH0pXG4gICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICByZW5kZXJHYWxsZXJ5SXRlbShkYXRhKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgfSlcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgcG9wdXBGb3JtUGhvdG8uc2V0TG9hZG5pZ0lzQnRuKGZhbHNlKTtcbiAgICAgICAgcG9wdXBGb3JtUGhvdG8uY2xvc2UoKTtcbiAgICAgIH0pO1xuICB9LFxufSk7XG5cbnBvcHVwRnVsbFNjcmVlbkltZy5zZXRFdmVudExpc3RlbmVycygpO1xucG9wdXBGb3JtUHJvZmlsZS5zZXRFdmVudExpc3RlbmVycygpO1xucG9wdXBGb3JtUGhvdG8uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbnBvcHVwRGVsZXRlQ2FyZC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGl0ZW0pIHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKHtcbiAgICBkYXRhOiBpdGVtLFxuICAgIHRlbXBsYXRlU2VsZWN0b3I6IFwiI2dhbGxlcnktaXRlbS10ZW1wbGF0ZVwiLFxuICAgIHVzZXJJZDogdXNlcklkLFxuICAgIGhhbmRsZUJ0bkRlbGV0ZUNsaWNrOiAoKSA9PiB7XG4gICAgICBwb3B1cERlbGV0ZUNhcmQub3BlbihjYXJkKTtcbiAgICB9LFxuICAgIGhhbmRsZUNhcmRDbGljazogKCkgPT4ge1xuICAgICAgcG9wdXBGdWxsU2NyZWVuSW1nLm9wZW4oe1xuICAgICAgICBuYW1lOiBjYXJkLl9uYW1lLFxuICAgICAgICBsaW5rOiBjYXJkLl9saW5rLFxuICAgICAgfSk7XG4gICAgfSxcbiAgfSk7XG4gIHJldHVybiBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xufVxuXG5mdW5jdGlvbiByZW5kZXJHYWxsZXJ5SXRlbShpdGVtKSB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChpdGVtKTtcbiAgZ2FsbGVyeUNhcmRMaXN0LnNldEl0ZW0oY2FyZEVsZW1lbnQpO1xufVxuXG5jb25zdCBnYWxsZXJ5Q2FyZExpc3QgPSBuZXcgU2VjdGlvbih7XG4gIGNvbnRhaW5lclNlbGVjdG9yOiBnYWxsZXJ5TGlzdFNlbGVjdG9yLFxuICByZW5kZXJlcjogKGl0ZW0pID0+IHtcbiAgICByZW5kZXJHYWxsZXJ5SXRlbShpdGVtKTtcbiAgfSxcbn0pO1xuXG5jb25zdCBnZXRJbml0aWFsRGF0YSA9IGFzeW5jICgpID0+IHtcbiAgYXdhaXQgYXBpXG4gICAgLmdldEluaXRpYWxVc2VySW5mbygpXG4gICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgdXNlcklkID0gcmVzdWx0Ll9pZDtcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHJlc3VsdCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9KTtcblxuICBhd2FpdCBhcGlcbiAgICAuZ2V0SW5pdGlhbENhcmRzKClcbiAgICAudGhlbigoY2FyZHMpID0+IHtcbiAgICAgIGdhbGxlcnlDYXJkTGlzdC5yZW5kZXJJdGVtcyhjYXJkcy5yZXZlcnNlKCkpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfSk7XG59O1xuZ2V0SW5pdGlhbERhdGEoKTtcblxuZnVuY3Rpb24gZW5hYmxlVmFsaWRhdGlvbihjb25maWcpIHtcbiAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1TZWxlY3RvcikpO1xuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xuICAgIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHtcbiAgICAgIGNvbmZpZzogY29uZmlnLFxuICAgICAgZm9ybUVsZW1lbnQ6IGZvcm1FbGVtZW50LFxuICAgIH0pO1xuICAgIGNvbnN0IGZvcm1OYW1lID0gZm9ybUVsZW1lbnQuZ2V0QXR0cmlidXRlKFwibmFtZVwiKTtcbiAgICBmb3JtVmFsaWRhdG9yc1tmb3JtTmFtZV0gPSB2YWxpZGF0b3I7XG4gICAgdmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbiAgfSk7XG59XG5cbmVuYWJsZVZhbGlkYXRpb24oY29uZmlnVmFsaWRhdG9yKTtcblxucHJvZmlsZUVkaXRJbmZvQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIHBvcHVwRm9ybVByb2ZpbGUuc2V0SW5wdXRWYWx1ZSh1c2VySW5mby5nZXRVc2VySW5mbygpKTtcbiAgZm9ybVZhbGlkYXRvcnNbXCJwcm9maWxlLWZvcm1cIl0ucmVzZXRWYWxpZGF0aW9uKCk7XG4gIHBvcHVwRm9ybVByb2ZpbGUub3BlbigpO1xufSk7XG5cbnByb2ZpbGVBZGRHYWxsZXJ5SXRlbUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBmb3JtVmFsaWRhdG9yc1tcImNhcmQtZm9ybVwiXS5yZXNldFZhbGlkYXRpb24oKTtcbiAgcG9wdXBGb3JtUGhvdG8ub3BlbigpO1xufSk7XG4iXSwibmFtZXMiOlsiQXBpIiwiYmFzZVVybCIsImhlYWRlcnMiLCJ0aGlzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsImZldGNoIiwidGhlbiIsInJlcyIsIm9rIiwianNvbiIsImRhdGEiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsIm5hbWUiLCJhYm91dCIsImxpbmsiLCJjYXJkSWQiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJyZW5kZXJlciIsIl9jb250YWluZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJfcmVuZGVyZXIiLCJlbGVtZW50IiwicHJlcGVuZCIsImlubmVySFRNTCIsIml0ZW1zIiwiX2NsZWFyIiwiZm9yRWFjaCIsIml0ZW0iLCJDYXJkIiwidGVtcGxhdGVTZWxlY3RvciIsInVzZXJJZCIsImhhbmRsZUJ0bkRlbGV0ZUNsaWNrIiwiaGFuZGxlQ2FyZENsaWNrIiwiX25hbWUiLCJfbGluayIsIl90ZW1wbGF0ZVNlbGVjdG9yIiwiX3VzZXJJZCIsIl9vd25lcklkIiwib3duZXIiLCJfaWQiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2NvdW50TGlrZXMiLCJsaWtlcyIsImxlbmd0aCIsIl9oYW5kbGVCdG5EZWxldGVDbGljayIsImlkIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9lbGVtZW50IiwiX2dldFRlbXBsYXRlIiwiX25hbWVFbGVtZW50IiwiX3Bob3RvRWxlbWVudCIsIl9saWtlRWxlbWVudCIsIl90cmFzaEVsZW1lbnQiLCJfY291bnRMaWtlc0VsZW1lbnQiLCJ0ZXh0Q29udGVudCIsInNyYyIsImFsdCIsIl9pc1VzZXJPd25lciIsIl9kZWxldGVUcmFzaEVsZW1lbnQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJyZW1vdmUiLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUxpa2VDbGljayIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIlVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiYWJvdXRTZWxlY3RvciIsIl91c2VyTmFtZSIsIl91c2VyQWJvdXQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBTZWxlY3RvciIsIl9wb3B1cCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJhZGQiLCJ3aW5kb3ciLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0Iiwia2V5IiwiY2xvc2UiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEltYWdlIiwiX3BvcHVwSW1nIiwiX3BvcHVwTmFtZVZhbHVlIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9wb3B1cEZvcm0iLCJfaW5wdXRzVmFsdWUiLCJfZm9ybUlucHV0cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfYnRuU3VibWl0IiwiX2J0blN1Ym1pdFRleHRWYWx1ZSIsInJlc2V0IiwiaW5wdXQiLCJ2YWx1ZSIsImlzTG9hZGluZyIsImRpc2FibGVkIiwiaW5wdXROYW1lIiwiZ2V0QXR0cmlidXRlIiwicHJldmVudERlZmF1bHQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJQb3B1cFdpdGjQoW9uZmlybWF0aW9uIiwiY2FyZCIsIkZvcm1WYWxpZGF0b3IiLCJjb25maWciLCJmb3JtRWxlbWVudCIsIl9mb3JtU2VsZWN0b3IiLCJmb3JtU2VsZWN0b3IiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25TZWxlY3RvciIsIl9pbnB1dEVycm9yU2VsZWN0b3IiLCJpbnB1dEVycm9yU2VsZWN0b3IiLCJfZXJyb3JTZWxlY3RvciIsImVycm9yU2VsZWN0b3IiLCJfZm9ybUVsZW1lbnQiLCJfaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwiX2J1dHRvbkVsZW1lbnQiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJfZXJyb3JFbGVtZW50IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwic29tZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwicHJvZmlsZSIsInByb2ZpbGVFZGl0SW5mb0J0biIsInByb2ZpbGVBZGRHYWxsZXJ5SXRlbUJ0biIsImZvcm1WYWxpZGF0b3JzIiwiaSIsImFwaSIsImF1dGhvcml6YXRpb24iLCJ1c2VySW5mbyIsInBvcHVwRnVsbFNjcmVlbkltZyIsInBvcHVwRGVsZXRlQ2FyZCIsInNldExvYWRuaWdJc0J0biIsImRlbGV0ZUNhcmQiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJmaW5hbGx5IiwicG9wdXBGb3JtUHJvZmlsZSIsImlucHV0c1ZhbHVlIiwicmVzZXRWYWxpZGF0aW9uIiwicGF0aFVzZXJJbmZvIiwicmVzdWx0Iiwic2V0VXNlckluZm8iLCJwb3B1cEZvcm1QaG90byIsInBvc3RDYXJkIiwicmVuZGVyR2FsbGVyeUl0ZW0iLCJjYXJkRWxlbWVudCIsIm9wZW4iLCJnZW5lcmF0ZUNhcmQiLCJjcmVhdGVDYXJkIiwiZ2FsbGVyeUNhcmRMaXN0Iiwic2V0SXRlbSIsInNldEV2ZW50TGlzdGVuZXJzIiwiZ2V0SW5pdGlhbFVzZXJJbmZvIiwiZ2V0SW5pdGlhbENhcmRzIiwiY2FyZHMiLCJyZW5kZXJJdGVtcyIsInJldmVyc2UiLCJnZXRJbml0aWFsRGF0YSIsInZhbGlkYXRvciIsImZvcm1OYW1lIiwiZW5hYmxlVmFsaWRhdGlvbiIsInNldElucHV0VmFsdWUiLCJnZXRVc2VySW5mbyJdLCJzb3VyY2VSb290IjoiIn0=